<app-carregando-requisicao [showProgress]="carregou"></app-carregando-requisicao>
<div class="row justify-content-center distanciamentoNavbar">
    <div class="col-xl-6 col-md-12">
        <div class="card border-success mb-3">
            <div class="card-body">
                <h3 class="card-title">Digite sua nova senha</h3>
                <hr>

                <form [formGroup]="novaSenha" (ngSubmit)="enviar()">

                    <div class="mb-3 mt-4">

                        <div class="row centralizar">

                            <div class="mb-4">
                                <label for="senha" class="form-label">Nova Senha</label>
                                <div class="input-group">

                                    <input [type]="visualizarSenha ? 'text':'password'" formControlName="senha"
                                        class="form-control semSombra" placeholder="Digite sua nova senha" id="senha"
                                        [ngClass]="{'is-invalid': foiEnviado && f.senha.errors}" />

                                    <span class="input-group-text" style="cursor: pointer;" (click)="mostrarSenha()">
                                        <i class="bi bi-eye-slash"
                                            [ngClass]="{'bi-eye-slash': !visualizarSenha, 'bi-eye': visualizarSenha}"></i>
                                    </span>

                                    <div *ngIf="foiEnviado && f.senha.errors" class="invalid-feedback">
                                        <div *ngIf="f.senha.errors.required">O campo de senha é obrigatório</div>
                                        <div *ngIf="f.senha.errors.minlength">O campo de senha precisa ter no mínimo 6
                                            digitos</div>
                                    </div>

                                </div>
                            </div>

                            <div class="mb-4">
                                <label for="senha" class="form-label">Confirmar Nova Senha</label>
                                <div class="input-group">

                                    <input [type]="visualizarSenhaConfirmacao ? 'text':'password'"
                                        formControlName="confirmarSenha" class="form-control semSombra"
                                        placeholder="Confirme a nova senha" id="confirmarSenha"
                                        [ngClass]="{'is-invalid': foiEnviado && f.confirmarSenha.errors || (senhasDiferentes && foiEnviado)}" />

                                    <span class="input-group-text" style="cursor: pointer;"
                                        (click)="mostrarSenhaConfirmacao()">
                                        <i class="bi bi-eye-slash"
                                            [ngClass]="{'bi-eye-slash': !visualizarSenhaConfirmacao, 'bi-eye': visualizarSenhaConfirmacao}"></i>
                                    </span>

                                    <div *ngIf="foiEnviado && f.confirmarSenha.errors" class="invalid-feedback">
                                        <div *ngIf="f.confirmarSenha.errors.required">O campo de confirmar senha é
                                            obrigatório</div>
                                        <div *ngIf="f.confirmarSenha.errors.minlength">O campo de confirmar a senha
                                            precisa ter
                                            no mínimo 6 digitos</div>
                                    </div>

                                    <div *ngIf="foiEnviado && senhasDiferentes" class="invalid-feedback">
                                        <div>As senhas não se coincidem</div>
                                    </div>

                                </div>
                            </div>

                        </div>

                    </div>

                    <hr>

                    <div>
                        <button type="submit" class="btn">Enviar</button>
                    </div>
                </form>

            </div>
        </div>
    </div>
</div>